:root { --max-w: 1120px; --fg:#0d0d0d; --muted:#666; --bg:#fff; --brand:#111827; --card:#fff; --border:#e5e7eb; --radius:14px }
*{ box-sizing:border-box } html,body{ margin:0; padding:0; font-family: system-ui, -apple-system, 'Noto Sans TC', 'PingFang TC', 'Microsoft JhengHei', Arial, Helvetica, sans-serif; color:var(--fg); background:var(--bg) }

/* --- UI Enhancements v1 --- */
.card {
  transition: transform .16s ease, box-shadow .16s ease, border-color .12s ease;
}
.card:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 18px 40px rgba(0,0,0,.12);
  border-color: color-mix(in srgb, var(--border) 40%, var(--fg));
}
/* View modes */
.toolbar { display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin: 12px 0 16px }
.viewbtn { padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:var(--card); cursor:pointer }
.viewbtn[aria-pressed="true"] { background: var(--brand); color:#fff; border-color: var(--brand) }

/* Thumbnail grid mode */
.grid.thumbs { gap: 12px }
.grid.thumbs .card { border-radius: 12px; overflow: clip }
.grid.thumbs .card:hover { transform: scale(1.02); }
.grid.thumbs .thumb { aspect-ratio: 1/1 }
.grid.thumbs .meta { display: none }
.grid.thumbs .tags { display:none }

/* Head layering to avoid hover overlap */
.head { position: relative; z-index: 5; background: var(--bg); }
.grid { position: relative; z-index: 1; margin-top: 8px; }
.card { position: relative; z-index: 0; }
.card:hover { z-index: 2; transform: translateY(-2px) scale(1.02); }

.card { overflow: clip; }



/* share button row */
.actions { margin-top: 4px }


/* --- Mobile optimizations v1 --- */
@media (max-width: 640px){
  .container { padding: 0 14px }
  .toolbar { gap: 8px; margin: 8px 0 12px }
  .grid { gap: 12px }
  .meta { padding: 12px }
  .filter-toggle { display: inline-flex }
  .searchbar { display: none }
  html.filters-open .searchbar { display: flex }
}
/* Earlier two-column breakpoint for small phones */
@media (min-width: 400px){
  .grid { grid-template-columns: repeat(2, minmax(0, 1fr)) }
}
@media (min-width: 760px){
  .grid { grid-template-columns: repeat(3, minmax(0, 1fr)) }
}
@media (min-width: 1024px){
  .grid { grid-template-columns: repeat(4, minmax(0, 1fr)) }
}
/* Filter toggle button base style */
.filter-toggle {
  display: none;
  align-items: center; justify-content: center;
  padding: 8px 12px; border: 1px solid var(--border); border-radius: 10px;
  background: var(--card); color: var(--fg); font-weight: 700; cursor: pointer;
}


/* --- Mobile optimizations v2: fix filter toggle visibility and columns --- */
/* Show filter toggle by default, hide on desktop */
.filter-toggle { display: inline-flex; align-items:center; justify-content:center; }
@media (min-width: 768px){ .filter-toggle { display: none } }

/* Collapse filters only on small screens */
@media (max-width: 640px){
  .searchbar { display: none }
  html.filters-open .searchbar { display: flex }
}

/* Responsive columns override (authoritative) */
.grid { grid-template-columns: repeat(1, minmax(0, 1fr)) }
@media (min-width: 480px){ .grid { grid-template-columns: repeat(2, minmax(0, 1fr)) } }
@media (min-width: 768px){ .grid { grid-template-columns: repeat(3, minmax(0, 1fr)) } }
@media (min-width: 1200px){ .grid { grid-template-columns: repeat(4, minmax(0, 1fr)) } }
