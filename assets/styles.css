/* ====== Base tokens ====== */
:root{
  --max-w: 1120px;
  --fg: #0d0d0d;
  --muted: #666;
  --bg: #fff;
  --brand: #111827;
  --card: #fff;
  --border: #e5e7eb;
  --radius: 14px;
}

*{ box-sizing: border-box; }
html, body{ margin:0; padding:0; background:var(--bg); color:var(--fg);
  font-family: system-ui, -apple-system, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}
a{ color: inherit; text-decoration: none; }
img{ max-width: 100%; display: block; }

.container{ max-width: var(--max-w); margin: 0 auto; padding: 0 20px; }

.muted{ color: var(--muted); }
.tag{ display:inline-block; padding:2px 8px; border:1px solid var(--border); border-radius:999px; font-size:12px; color:#333; background:#fafafa; }
.row{ display:flex; align-items:center; gap:8px; }

/* ====== Head + Toolbar ====== */
.head{ position: relative; z-index: 5; background: var(--bg); }
.toolbar{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin: 12px 0 16px; }
.viewbtn{ padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:var(--card); cursor:pointer; }
.viewbtn[aria-pressed="true"]{ background: var(--brand); color:#fff; border-color: var(--brand); }

/* Filter toggle (mobile visible) */
.filter-toggle{ display:inline-flex; align-items:center; justify-content:center;
  padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:var(--card); font-weight:700; cursor:pointer;
}
@media (min-width:768px){ .filter-toggle{ display:none } }

/* Search bar */
.searchbar{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin: 12px 0 16px; }
@media (max-width:640px){
  .searchbar{ display:none }
  html.filters-open .searchbar{ display:flex }
}

/* ====== Grid & Cards ====== */
/* The page defines a 12-col grid inline; this stylesheet only sets base layout */
.grid{ display:grid; gap:16px; }
.card{
  background: var(--card);
  border:1px solid var(--border);
  border-radius: var(--radius);
  overflow:hidden;
  position:relative;
  transition: transform .16s ease, box-shadow .16s ease, border-color .12s ease;
}
.card:hover{
  z-index:2;
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 18px 40px rgba(0,0,0,.12);
  border-color: color-mix(in srgb, var(--border) 40%, var(--fg));
}
.thumb{
  display:block;
  width:100%;
  aspect-ratio: 4/3;
  background:#f2f3f5 center/cover no-repeat;
}
.meta{ padding: 14px; }
.meta .title{ font-weight:700; }
.meta .date{ color: var(--muted); font-size: 12px; }
.tags{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
.actions{ margin-top: 6px; }

/* Thumbnail grid mode */
.grid.thumbs{ gap: 12px; }
.grid.thumbs .card{ border-radius: 12px; overflow: clip; }
.grid.thumbs .card:hover{ transform: scale(1.02); }
.grid.thumbs .thumb{ aspect-ratio: 1/1; }
.grid.thumbs .meta, .grid.thumbs .tags{ display:none; }

/* ====== Pager ====== */
.pager{ display:flex; gap:10px; align-items:center; justify-content:center; margin: 16px 0; }
.pager button{ padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:var(--card); cursor:pointer; }
.pager button:disabled{ opacity:.4; cursor: default; }

/* ====== Layering to prevent hover overlap ====== */
.grid{ position:relative; z-index:1; margin-top:8px; }
.card{ z-index:0; }

/* ====== Responsive columns (fallback) ====== */
/* Final column spans are enforced by <style id="cols-override"> in the page */
@media (min-width:480px){ .grid{ gap:14px } }
@media (min-width:768px){ .grid{ gap:16px } }
@media (min-width:1200px){ .grid{ gap:18px } }

/* ====== Lightbox (post.html) ====== */
/* Mobile controls below image; desktop arrows on sides */
#lb-dialog{ width:100%; }
@media (max-width:640px){
  #lb-bar{ display:flex !important; gap:12px; justify-content:center; }
  #lb-prev,#lb-next{ position: static !important; }
}
@media (min-width:641px){
  #lb-prev,#lb-next{ position:absolute; top:50%; transform: translateY(-50%); }
  #lb-prev{ left:18px }  #lb-next{ right:18px }
  #lb-bar{ display:block; height:0; overflow:visible; }
}
#lb-prev,#lb-next{ padding:12px 16px; border:1px solid #666; background:#111; color:#fff; border-radius:12px; cursor:pointer; font-weight:800; font-size:18px; box-shadow:0 2px 10px rgba(0,0,0,.35); }
#lb-prev:hover,#lb-next:hover{ filter: brightness(1.2); }
#lb-cap{ font-size:16px !important; color:#ddd }
#lb-count{ font-size:13px !important; color:#bbb }
#lb-close{ padding:10px 12px; border:1px solid #666; background:#111; color:#fff; border-radius:12px; cursor:pointer; font-weight:700 }


/* --- Lightbox controls v3 (mobile close fixed, desktop arrows visible) --- */
@media (max-width: 640px){
  #lb-close{ position: fixed; top: 10px; right: 10px; z-index: 1002; }
  #lb-bar{ display: flex !important; gap: 12px; justify-content: center; }
  #lb-prev, #lb-next{ position: static !important; }
}
@media (min-width: 641px){
  #lb-bar{ display: block; height: 0; overflow: visible; }
  #lb-prev, #lb-next{ position: fixed; top: 50%; transform: translateY(-50%); z-index: 1001; }
  #lb-prev{ left: 24px; } 
  #lb-next{ right: 24px; }
}
/* Increase visibility */
#lb-prev, #lb-next{ font-size: 20px; font-weight: 900; padding: 14px 18px; }
#lb-prev:hover, #lb-next:hover{ filter: brightness(1.25); }


/* --- Lightbox mobile/desktop fixes v3 --- */
#lb-close{ position:absolute; top:8px; right:8px; z-index:1001; padding:12px 14px; font-weight:800; font-size:16px }
#lb-prev,#lb-next{ font-size:18px; font-weight:800; box-shadow:0 2px 10px rgba(0,0,0,.35) }
@media (max-width:640px){
  #lb-bar{ display:flex !important; justify-content:center; }
  #lb-prev,#lb-next{ position: static !important; }
}
@media (min-width:641px){
  /* Override any inline display:none with !important to show arrows on desktop */
  #lb-bar{ display:block !important; height:0; overflow:visible; }
  #lb-prev,#lb-next{ position:absolute; top:50%; transform:translateY(-50%); }
  #lb-prev{ left:18px }  #lb-next{ right:18px }
}

#lb-dialog{ width:auto; }
@media (max-width:640px){ #lb-dialog{ width:100%; } }


/* --- Lightbox desktop arrows outside v4 --- */
@media (min-width: 1024px){
  #lb-bar{ display:block !important; height:0; overflow:visible; }
  #lb-prev, #lb-next{
    position: fixed !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    z-index: 1002;
  }
  #lb-prev{ left:24px !important; }
  #lb-next{ right:24px !important; }
}


/* --- Gallery 固定顯示 6 個，3x2 --- */
.gallery.grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--gap);
}

.gallery.grid > .card {
  aspect-ratio: 1 / 1;
}


/* --- 修正 Logo 大小 --- */
header img, .logo img {
  height: 40px !important;
  max-height: 40px !important;
  width: auto !important;
  object-fit: contain !important;
}


/* --- 修正 LOGO 尺寸 --- */
.logo img, header img {
  height: 40px !important;
  width: auto !important;
  max-height: 40px !important;
  object-fit: contain !important;
}


/* --- LOGO 最大高度限制，維持比例 --- */
header .logo img {
  max-height: 64px;
  height: auto;
  width: auto;
  object-fit: contain;
}
